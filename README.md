# CopyChecker
=============

## 概要
Pythonを使用したテキストデータ（.txt）やコード（.py）などの類似度を算出するプログラム


## 使用方法
```
python3 copychecker.py [options]
[options]
```
```
options:
    -p, --path <ディレクトリ名> 類似度を算出するファイルが入ったディレクトリ名を指定, default='./programs/'
    -i, --level <ディレクトリの階層> --pathで指定したディレクトリの階層を指定, default=1
    -e, --ext <拡張子の指定> 類似度を算出するファイルの拡張子を指定, default='c'
    -o, --out <ファイル名> 結果を出力するファイル名を指定
    -b, --border <類似度の境界線>　結果を保存する類似度の境界線を指定, default=0.5 
    -s, --sort プログラムの行をソートして比較
    -d, --diff 差分を表示
    -r, --rank 類似度を降順で表示
    -f, --fill タブと空白を除去
```

## 例
### 実行1
```bash
python3 copychecker.py -p ./programs -l 1 -e c -o result1.log -b 0.6 -d -r > result1_details.log
```
### 結果1
- result1.log
```
----------------------------------------------------------------------------------------------------
ratio：1.0
./programs/a.py
./programs/b.py

ratio：0.7142857142857143
./programs/a.py
./programs/c.py

----------------------------------------------------------------------------------------------------
ratio：0.7142857142857143
./programs/b.py
./programs/c.py

----------------------------------------------------------------------------------------------------

```
- result1_details.log
```
/*
['./programs/a.py', './programs/b.py', './programs/c.py']
★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
----------------------------------------------------------------------------------------------------
text1：./programs/a.py：text2：./programs/b.py

Ratio：
小数第5位：1.0
全て 　　：1.0

diff:

  def main(a):

      for i in a:

          print(f"{a}")

  

  if __name__ == '__main__':

      a = [i for i in range(10)]

      main(a)
----------------------------------------------------------------------------------------------------
text1：./programs/a.py：text2：./programs/c.py

Ratio：
小数第5位：0.71429
全て 　　：0.7142857142857143

diff:

  def main(a):

-     for i in a:

+     for i, j in enumerate(a):

-         print(f"{a}")

?                  ^

+         print(f"{i}:{j}")

?                  ^^^^^

  

  if __name__ == '__main__':

      a = [i for i in range(10)]

      main(a)
----------------------------------------------------------------------------------------------------
★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
----------------------------------------------------------------------------------------------------
text1：./programs/b.py：text2：./programs/c.py

Ratio：
小数第5位：0.71429
全て 　　：0.7142857142857143

diff:

  def main(a):

-     for i in a:

+     for i, j in enumerate(a):

-         print(f"{a}")

?                  ^

+         print(f"{i}:{j}")

?                  ^^^^^

  

  if __name__ == '__main__':

      a = [i for i in range(10)]

      main(a)
----------------------------------------------------------------------------------------------------
★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
ratio：1.0
./programs/a.py
./programs/b.py

ratio：0.7142857142857143
./programs/a.py
./programs/c.py

----------------------------------------------------------------------------------------------------
ratio：0.7142857142857143
./programs/b.py
./programs/c.py

----------------------------------------------------------------------------------------------------

```

### 実行2
```bash
python3 copychecker.py -p ./programs -l 2 -e "*" -o result2.log -b 0.8 -d > result2_details.log
```
### 結果1
- result2.log
```
----------------------------------------------------------------------------------------------------
ratio：1.0
./programs/1/1_a.py
./programs/2/2_b.py

----------------------------------------------------------------------------------------------------
```

- result2_details.log
```
/*/*
['./programs/1/1_a.py', './programs/2/2_b.py', './programs/3/3_c.py']
★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
----------------------------------------------------------------------------------------------------
text1：./programs/1/1_a.py：text2：./programs/2/2_b.py

Ratio：
小数第5位：1.0
全て 　　：1.0

diff:

  def main(a):

      for i in a:

          print(f"{a}")

  

  if __name__ == '__main__':

      a = [i for i in range(10)]

      main(a)
----------------------------------------------------------------------------------------------------
text1：./programs/1/1_a.py：text2：./programs/3/3_c.py

Ratio：
小数第5位：0.71429
全て 　　：0.7142857142857143
----------------------------------------------------------------------------------------------------
★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
----------------------------------------------------------------------------------------------------
text1：./programs/2/2_b.py：text2：./programs/3/3_c.py

Ratio：
小数第5位：0.71429
全て 　　：0.7142857142857143
----------------------------------------------------------------------------------------------------
★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
ratio：1.0
./programs/1/1_a.py
./programs/2/2_b.py

----------------------------------------------------------------------------------------------------

```
## 参考
- https://docs.python.org/ja/3/library/difflib.html#